!function(t){"use strict";ProgressButton.prototype.options={statusTime:1500},ProgressButton.prototype._init=function(){this._validate(),this._create(),this._initEvents()},ProgressButton.prototype._validate=function(){null===this.button.getAttribute("data-style")&&this.button.setAttribute("data-style","fill"),null===this.button.getAttribute("data-vertical")&&null===this.button.getAttribute("data-horizontal")&&this.button.setAttribute("data-horizontal",""),support.transforms3d||null===this.button.getAttribute("data-perspective")||(this.button.removeAttribute("data-perspective"),this.button.setAttribute("data-style","fill"),this.button.removeAttribute("data-vertical"),this.button.setAttribute("data-horizontal",""))},ProgressButton.prototype._create=function(){var t=document.createElement("span");t.className="content",t.innerHTML=this.button.innerHTML;var e=document.createElement("span");e.className="progress";var s=document.createElement("span");if(s.className="progress-inner",e.appendChild(s),this.button.innerHTML="",null!==this.button.getAttribute("data-perspective")){var n=document.createElement("span");n.className="progress-wrap",n.appendChild(t),n.appendChild(e),this.button.appendChild(n)}else this.button.appendChild(t),this.button.appendChild(e);this.progress=s,null!==this.button.getAttribute("data-horizontal")?this.progressProp="width":null!==this.button.getAttribute("data-vertical")&&(this.progressProp="height"),this._enable()},ProgressButton.prototype._setProgress=function(t){this.progress.style[this.progressProp]=100*t+"%"},ProgressButton.prototype._initEvents=function(){var t=this;this.button.addEventListener("click",function(){t.button.setAttribute("disabled",""),classie.remove(t.progress,"notransition"),classie.add(this,"state-loading"),setTimeout(function(){if("function"==typeof t.options.callback)t.options.callback(t);else{t._setProgress(1);var e=function(s){support.transitions&&s.propertyName!==t.progressProp||(this.removeEventListener(transEndEventName,e),t._stop())};support.transitions?t.progress.addEventListener(transEndEventName,e):e.call()}},"fill"===t.button.getAttribute("data-style")||"top-line"===t.button.getAttribute("data-style")||"lateral-lines"===t.button.getAttribute("data-style")?0:200)})},ProgressButton.prototype._stop=function(t){var e=this;setTimeout(function(){e.progress.style.opacity=0;var s=function(t){support.transitions&&"opacity"!==t.propertyName||(this.removeEventListener(transEndEventName,s),classie.add(e.progress,"notransition"),e.progress.style[e.progressProp]="0%",e.progress.style.opacity=1)};if(support.transitions?e.progress.addEventListener(transEndEventName,s):s.call(),"number"==typeof t){var n=t>=0?"state-success":"state-error";classie.add(e.button,n),setTimeout(function(){classie.remove(e.button,n),e._enable()},e.options.statusTime)}else e._enable();classie.remove(e.button,"state-loading")},100)},ProgressButton.prototype._enable=function(){this.button.removeAttribute("disabled")},t.ProgressButton=ProgressButton}(window);